<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Phantom OS – Full Suite + Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- WinBox ライブラリ読み込み -->
  <script src="https://cdn.jsdelivr.net/gh/nextapps-de/winbox@0.1.8/dist/winbox.bundle.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <style>
    /* WinBox AeroFlat風 */
    .wb-body, .winbox {
      background: rgba(255, 255, 255, 0)!important;
      box-shadow: 0 8px 32px rgba(120,160,220,0.18)!important;
      overflow: hidden!important;
    }
    .wb-body{
      opacity: 0.85;
    }
    .wb-title {
      color: #2a3a4a!important;
      font-weight: 500!important;
      letter-spacing: 0.04em;
    }
    .wb-header {
      background: rgba(255, 255, 255, 0.491)!important;
      -bottom: 1px solid #e0e6ef!important;
      -webkit-backdrop-filter: blur(8px);
      backdrop-filter: blur(8px);
      -radius: 15px 15px 0px 0px;
    }
    .wb-body{
      -radius: 0px 0px 15px 15px;
    }
  </style>
</head>
<body class="min-h-screen bg-cover bg-center bg-no-repeat" style="background-image: url('wallpaper.png');">

  <!-- サイドバー（tableで管理） -->
  <div class="fixed top-16 left-6 w-24 z-10">
    <table class="w-full bg-transparent">
      <tbody>
        <tr><td>
          <button class="w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('Game Center', 'center', 'center', '520px', '520px', 'Apps/game.html');">
            <img src="SysIcons/game.png" alt="Game Center" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">Game</span>
          </button>
        </td>
        <td>
          <button class="p-2 w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('Writedown', 'center', 'center', '600px', '500px', 'Apps/Writedown.html');">
            <img src="SysIcons/Writedown.png" alt="Writedown" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">Writedown</span>
          </button>
        </td>
        </tr>
        <tr><td>
          <button class="w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('Notepad', 'center', 'center', '400px', '450px', 'Apps/notepad.html');">
            <img src="SysIcons/notepad.png" alt="Notepad" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">Notepad</span>
          </button>
        </td>
        <td>
          <button class="p-2 w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('MakeGrid', 'center', 'center', '520px', '480px', 'Apps/makegrid.html');">
            <img src="SysIcons/makeGrid.png" alt="MakeGrid" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">MakeGrid</span>
          </button>
        </td>
        </tr>
        <tr><td>
          <button class="w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('NebulaBrowse', 'center', 'center', '800px', '600px', 'https://www.google.com/webhp?igu=1');">
            <img src="SysIcons/browser.png" alt="NebulaBrowse" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-xs text-white font-semibold mt-1 group-hover:text-blue-900">Nebula<br>Browse</span>
          </button>
        </td><td>
          <button class="p-2 w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('CodeCanvas', 'center', 'center', '520px', '480px', 'Apps/codecanvas.html');">
            <img src="SysIcons/code.png" alt="CodeCanvas" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">CodeCanvas</span>
          </button>
        </td>
      
      </tr>
        <tr><td>
          <button class="w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('Weather', 'center', 'center', '400px', '480px', 'Apps/weather.html');">
            <img src="SysIcons/weather.png" alt="weather" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">Weather</span>
          </button>
        </td></tr>
        <tr><td>
          <button class="w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('Gallery', 'center', 'center', '400px', '480px', 'Apps/gallery.html');">
            <img src="SysIcons/gallery.png" alt="gallery" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">Gallery</span>
          </button>
        </td></tr>
        <tr><td>
          <button class="w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('Terminal', 'center', 'center', '700px', '400px', 'Apps/terminal.html');">
            <img src="SysIcons/terminal.png" alt="Terminal" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">Terminal</span>
          </button>
        </td></tr>
        <tr><td>
          <button class="w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('Settings', 'center', 'center', '420px', '420px', '');">
            <img src="SysIcons/settings.png" alt="Settings" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">Settings</span>
          </button>
        </td></tr>
        <tr><td>
          <button class="w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('MediaPlayer', 'center', 'center', '520px', '420px', 'Apps/media.html');">
            <img src="SysIcons/music.png" alt="MediaPlayer" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">Media</span>
          </button>
        </td></tr>
        <tr><td>
          <button class="w-full flex flex-col items-center bg-transparent  hover:bg-blue-100 rounded-xl py-2 px-0 shadow transition cursor-pointer group" onclick="openApp('Calendar', 'center', 'center', '520px', '480px', 'Apps/calendar.html');">
            <img src="SysIcons/calendar.png" alt="Calendar" class="w-10 h-10 mb-1 opacity-95 transition-transform duration-200"><span class="text-sm text-white font-semibold mt-1 group-hover:text-blue-900">Calendar</span>
          </button>
        </td></tr>
      </tbody>
    </table>
  </div>
  <div class="fixed left-1/2 bottom-8 transform -translate-x-1/2 z-20">
    <div class="flex bg-white/60 hover:bg-white/70 rounded-3xl shadow-xl px-6 py-2 gap-4 backdrop-blur-md">
      <button class="flex flex-col items-center" onclick="openApp('Game Center', 'center', 'center', '520px', '520px', 'Apps/game.html');">
        <img src="SysIcons/game.png" alt="Game Center" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
      <button class="flex flex-col items-center" onclick="openApp('Notepad', 'center', 'center', '400px', '450px', 'Apps/notepad.html');">
        <img src="SysIcons/notepad.png" alt="Notepad" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
      <button class="flex flex-col items-center" onclick="openApp('NebulaBrowse', 'center', 'center', '800px', '600px', 'https://www.google.com/webhp?igu=1');">
        <img src="SysIcons/browser.png" alt="NebulaBrowse" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
      <button class="flex flex-col items-center" onclick="openApp('Weather', 'center', 'center', '400px', '480px', 'Apps/weather.html');">
        <img src="SysIcons/weather.png" alt="weather" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
      <button class="flex flex-col items-center" onclick="openApp('Gallery', 'center', 'center', '400px', '480px', 'Apps/gallery.html');">
        <img src="SysIcons/gallery.png" alt="gallery" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
      <button class="flex flex-col items-center" onclick="openApp('Terminal', 'center', 'center', '700px', '400px', 'Apps/terminal.html');">
        <img src="SysIcons/terminal.png" alt="Terminal" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
      <button class="flex flex-col items-center" onclick="openApp('Settings', 'center', 'center', '420px', '420px', '');">
        <img src="SysIcons/settings.png" alt="Settings" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
      <button class="flex flex-col items-center" onclick="openApp('MediaPlayer', 'center', 'center', '520px', '420px', 'Apps/media.html');">
        <img src="SysIcons/music.png" alt="MediaPlayer" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
      <button class="flex flex-col items-center" onclick="openApp('Calendar', 'center', 'center', '520px', '480px', 'Apps/calendar.html');">
        <img src="SysIcons/calendar.png" alt="Calendar" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
      <button class="flex flex-col items-center" onclick="openApp('CodeCanvas', 'center', 'center', '520px', '480px', 'Apps/codecanvas.html');">
        <img src="SysIcons/code.png" alt="CodeCanvas" class="w-9 h-9 rounded-lg bg-white/20 shadow hover:scale-110 transition">
      </button>
    </div>
  </div>
  <!-- 右下時計 -->
  <div id="desktop-clock" class="fixed bottom-6 right-8 z-30 bg-white/70  hover:bg-blue-100 rounded-xl px-4 py-2 shadow text-blue-900 font-mono text-lg font-semibold select-none" style="backdrop-filter: blur(4px);">
    --:--:--
  </div>

  <!-- 起動用スクリプト -->
  <script>
    // Openアプリ（Terminal/Settingsは組み込み、他はURL指定でWinBoxで開く）
    function openApp(title, x, y, width, height, url) {
      // 80%スケールで位置・サイズ調整
      function scale(val) {
        if (typeof val === 'number') return val * 0.8;
        if (typeof val === 'string' && val.endsWith('px')) return (parseInt(val) * 0.8) + 'px';
        if (val === 'center') return 'center';
        return val;
      }
      if (title === 'Terminal') {
        new WinBox({
          title: 'Terminal',
          background: 'rgba(255,255,255,0.85)',
          x: scale(x), y: scale(y),
          width: scale(width), height: scale(height),
          html: `
            <div style="background:rgba(30,40,60,0.08);padding:0 0 8px 0;height:100%;display:flex;overflow:hidden;flex-direction:column;">
              <div id='terminal-output' style="flex:1;overflow-y:auto;font-family:monospace;font-size:15px;background:rgba(255,255,255,0.85);color:#222;padding:12px 10px 0 10px;min-height:120px;max-height:220px;"></div>
              <div style="display:flex;align-items:center;padding:8px 10px 0 10px;gap:8px;">
                <span style="color:#888;font-size:15px;">$</span>
                <input id='terminal-input' type='text' style="flex:1;font-size:15px;padding:6px 8px;-radius:6px;:1px solid #d0d6e0;background:rgba(255,255,255,0.95);outline:none;" placeholder="コマンドを入力...">
                <button id='terminal-run' style="padding:6px 14px;-radius:6px;:none;background:#4a90e2;color:white;font-weight:500;cursor:pointer;">実行</button>
              </div>
              <div style="padding:0 10px 8px 10px;display:flex;gap:8px;">
                <button class='terminal-btn' data-cmd='help' style="padding:4px 10px;-radius:5px;:none;background:#e0e6ef;color:#333;cursor:pointer;font-size:13px;">help</button>
                <button class='terminal-btn' data-cmd='clear' style="padding:4px 10px;-radius:5px;:none;background:#e0e6ef;color:#333;cursor:pointer;font-size:13px;">clear</button>
                <button class='terminal-btn' data-cmd='notepad' style="padding:4px 10px;-radius:5px;:none;background:#e0e6ef;color:#333;cursor:pointer;font-size:13px;">notepad</button>
                <button class='terminal-btn' data-cmd='weather' style="padding:4px 10px;-radius:5px;:none;background:#e0e6ef;color:#333;cursor:pointer;font-size:13px;">weather</button>
                <button class='terminal-btn' data-cmd='gallery' style="padding:4px 10px;-radius:5px;:none;background:#e0e6ef;color:#333;cursor:pointer;font-size:13px;">gallery</button>
                <button class='terminal-btn' data-cmd='browser' style="padding:4px 10px;-radius:5px;:none;background:#e0e6ef;color:#333;cursor:pointer;font-size:13px;">browser</button>
                <button class='terminal-btn' data-cmd='settings' style="padding:4px 10px;-radius:5px;:none;background:#e0e6ef;color:#333;cursor:pointer;font-size:13px;">settings</button>
                <button class='terminal-btn' data-cmd='media' style="padding:4px 10px;-radius:5px;:none;background:#e0e6ef;color:#333;cursor:pointer;font-size:13px;">media</button>
                <button class='terminal-btn' data-cmd='calendar' style="padding:4px 10px;-radius:5px;:none;background:#e0e6ef;color:#333;cursor:pointer;font-size:13px;">calendar</button>
              </div>
            </div>
          `
        });
        setTimeout(() => {
          const output = document.querySelector('.winbox .wb-body #terminal-output');
          const input = document.querySelector('.winbox .wb-body #terminal-input');
          const runBtn = document.querySelector('.winbox .wb-body #terminal-run');
          const btns = document.querySelectorAll('.winbox .wb-body .terminal-btn');
          if (output && input && runBtn) {
            function print(msg) {
              output.innerHTML += msg + '<br>';
              output.scrollTop = output.scrollHeight;
            }
            function clear() {
              output.innerHTML = '';
            }
            function help() {
              print('<span style="color:#4a90e2">利用可能なコマンド:</span>');
              print('notepad, weather, gallery, browser, settings, media, calendar, clear, help');
            }
            function openAppFromTerminal(cmd) {
              if (cmd === 'notepad') {
                window.openApp('Notepad', 'center', 'center', '400px', '450px', 'Apps/notepad.html');
              } else if (cmd === 'weather') {
                window.openApp('Weather', 'center', 'center', '400px', '480px', 'Apps/weather.html');
              } else if (cmd === 'gallery') {
                window.openApp('Gallery', 'center', 'center', '400px', '480px', 'Apps/gallery.html');
              } else if (cmd === 'browser') {
                window.openApp('NebulaBrowse', 'center', 'center', '800px', '600px', 'https://www.google.com/webhp?igu=1');
              } else if (cmd === 'settings') {
                window.openApp('Settings', 'center', 'center', '420px', '420px', '');
              } else if (cmd === 'media') {
                window.openApp('MediaPlayer', 'center', 'center', '520px', '420px', 'Apps/media.html');
              } else if (cmd === 'calendar') {
                window.openApp('Calendar', 'center', 'center', '520px', '480px', 'Apps/calendar.html');
              } else {
                print('<span style="color:#e74c3c">不明なコマンド:</span> ' + cmd);
              }
            }
            function handle(cmd) {
              cmd = cmd.trim();
              if (!cmd) return;
              print('<span style="color:#888">$</span> ' + cmd);
              if (cmd === 'clear') {
                clear();
              } else if (cmd === 'help') {
                help();
              } else {
                openAppFromTerminal(cmd);
              }
            }
            runBtn.onclick = () => {
              handle(input.value);
              input.value = '';
            };
            input.addEventListener('keydown', e => {
              if (e.key === 'Enter') {
                handle(input.value);
                input.value = '';
              }
            });
            btns.forEach(btn => {
              btn.onclick = () => {
                handle(btn.getAttribute('data-cmd'));
              };
            });
            help();
          }
        }, 100);
      } else if (title === 'Settings') {
        new WinBox({
          title: 'Settings',
          background: 'rgba(255,255,255,0.85)',
          x: scale(x), y: scale(y),
          width: scale(width), height: scale(height),
          html: `
            <div style="background:#f6f8fa;-radius:12px;padding:24px 18px 18px 18px;height:100%;display:flex;flex-direction:column;align-items:center;">
              <div style="font-size:1.3em;font-weight:600;color:#222;margin-bottom:18px;letter-spacing:0.04em;">Settings</div>
              <div style="width:100%;max-width:320px;background:#fff;-radius:8px;box-shadow:0 2px 12px #e0e6ef;padding:18px 16px;display:flex;flex-direction:column;gap:18px;">
                <div style="font-size:1.08em;color:#4a6a8a;font-weight:500;">テーマ</div>
                <div style="display:flex;gap:12px;align-items:center;">
                  <button style="padding:7px 18px;-radius:6px;:1.5px solid #b3c6e7;background:#eaf6ff;color:#222;font-weight:500;cursor:pointer;" onclick="document.body.style.filter='brightness(1.0)';">標準</button>
                  <button style="padding:7px 18px;-radius:6px;:1.5px solid #b3c6e7;background:#eaf6ff;color:#222;font-weight:500;cursor:pointer;" onclick="document.body.style.filter='brightness(0.8)';">ダーク</button>
                  <button style="padding:7px 18px;-radius:6px;:1.5px solid #b3c6e7;background:#eaf6ff;color:#222;font-weight:500;cursor:pointer;" onclick="document.body.style.filter='brightness(1.2)';">ライト</button>
                </div>
                <div style="font-size:1.08em;color:#4a6a8a;font-weight:500;">壁紙</div>
                <div style="display:flex;gap:12px;align-items:center;">
                  <button style="padding:7px 18px;-radius:6px;:1.5px solid #b3c6e7;background:#eaf6ff;color:#222;font-weight:500;cursor:pointer;" onclick="document.body.style.background='url(wallpaper.png) no-repeat center center fixed';document.body.style.backgroundSize='cover';">標準</button>
                  <button style="padding:7px 18px;-radius:6px;:1.5px solid #b3c6e7;background:#eaf6ff;color:#222;font-weight:500;cursor:pointer;" onclick="document.body.style.background='url(gallery1.png) no-repeat center center fixed';document.body.style.backgroundSize='cover';">ギャラリー1</button>
                  <button style="padding:7px 18px;-radius:6px;:1.5px solid #b3c6e7;background:#eaf6ff;color:#222;font-weight:500;cursor:pointer;" onclick="document.body.style.background='url(emotion_log.png) no-repeat center center fixed';document.body.style.backgroundSize='cover';">エモーション</button>
                </div>
                <div style="font-size:1.08em;color:#4a6a8a;font-weight:500;margin-top:18px;">ウィンドウ透明度</div>
                <div style="display:flex;gap:12px;align-items:center;">
                  <button id='open-opacity-app' style="padding:7px 18px;border-radius:6px;border:1.5px solid #b3c6e7;background:#eaf6ff;color:#222;font-weight:500;cursor:pointer;">透明度の設定</button>
                </div>
              </div>
            </div>
            <script>
              setTimeout(function(){
                var btn = document.getElementById('open-opacity-app');
                if(btn){
                  btn.addEventListener('click', function(){
                    if(window.parent && window.parent.openApp){
                      window.parent.openApp('Window Opacity', 'center', 'center', '420px', '180px', '');
                    }
                  });
                }
              }, 200);
            <\/script>
          `
        });
      } else {
        if(title === 'Window Opacity'){
          new WinBox({
            title: 'Window Opacity',
            background: 'rgba(255,255,255,0.85)',
            x: scale(x), y: scale(y),
            width: scale(width), height: scale(height),
            html: `
              <div style="background:#f6f8fa;border-radius:12px;padding:32px 18px 24px 18px;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;">
                <div style="font-size:1.15em;font-weight:600;color:#222;margin-bottom:18px;letter-spacing:0.04em;">ウィンドウ透明度の設定</div>
                <div style="width:100%;max-width:320px;background:#fff;border-radius:8px;box-shadow:0 2px 12px #e0e6ef;padding:18px 16px;display:flex;flex-direction:column;gap:18px;align-items:center;">
                  <input id='opacity-range' type='range' min='0.4' max='1' step='0.01' value='0.85' style="width:120px;">
                  <span id='opacity-value' style="color:#4a6a8a;font-size:1em;">0.85</span>
                </div>
              </div>
              <script>
                setTimeout(function(){
                  var range = document.getElementById('opacity-range');
                  var value = document.getElementById('opacity-value');
                  range.addEventListener('input', function(){
                    value.textContent = range.value;
                    if(window.parent){
                      window.parent.postMessage({type:'setWinboxOpacity',opacity:range.value},'*');
                    }
                  });
                }, 200);
              <\/script>
            `
          });
        }else{
          new WinBox({
            title: title,
            background: 'rgba(255,255,255,0.85)',
            x: y, y: x,
            width: width, height: height,
            url: url
          });
        }
      }
    }
  </script>
</body>
<script>
// 時計表示
function updateClock() {
  const clock = document.getElementById('desktop-clock');
  if (!clock) return;
  const now = new Date();
  const h = String(now.getHours()).padStart(2, '0');
  const m = String(now.getMinutes()).padStart(2, '0');
  const s = String(now.getSeconds()).padStart(2, '0');
  clock.textContent = `${h}:${m}:${s}`;
}
setInterval(updateClock, 1000);
updateClock();
</script>
</body>
</html>
